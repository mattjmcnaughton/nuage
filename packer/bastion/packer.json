{
  "builders": [{
    "type": "vagrant",
    "communicator": "ssh",
    "source_path": "../base/output-vagrant/package.box",
    "box_name": "_tmp_",
    "provider": "virtualbox",
    "teardown_method": "destroy",
    "add_force": true,
    "skip_package": true
  }, {
    "type": "amazon-ebs",
    "region": "us-east-1",
    "source_ami": "ami-07720d71db22b170b",
    "instance_type": "m3.medium",
    "ssh_username": "ubuntu",
    "ami_name": "bastion-{{isotime | clean_resource_name}}",
    "tags": {
      "project": "nuage",
      "Name": "bastion-{{isotime | clean_resource_name}}",
      "name": "bastion-{{isotime | clean_resource_name}}",
      "fullname": "bastion{{isotime | clean_resource_name}}",
      "base_image_ami": "ami-0cd7ba3b89f463fa8",
      "base_image_name": "base-2019-09-01T14-41-47Z",
      "date": "{{isotime | clean_resource_name}}"
    }
  }],
  "provisioners": [{
    "type": "ansible",
    "playbook_file": "./playbook.yml",
    "ansible_env_vars": [
      "ANSIBLE_ROLES_PATH=../share/roles"
    ]
  }, {
    "type": "inspec",
    "extra_arguments": ["--no-distinct-exit"],
    "profile": "../share/tests/linux-baseline"
  }, {
    "type": "inspec",
    "extra_arguments": ["--no-distinct-exit"],
    "profile": "../share/roles/mattjmcnaughton.entropy-generator/test/integration/default/"
  }, {
    "type": "inspec",
    "extra_arguments": ["--no-distinct-exit"],
    "profile": "../share/roles/mattjmcnaughton.system-security-updates/test/integration/default/"
  }, {
    "type": "inspec",
    "extra_arguments": ["--no-distinct-exit"],
    "profile": "../share/roles/mattjmcnaughton.ssh-hardening-lite/test/integration/default/"
  }, {
    "type": "inspec",
    "extra_arguments": ["--no-distinct-exit"],
    "profile": "../share/roles/mattjmcnaughton.bastion/test/integration/default/"
  }]
}
